<section class="o-section-content o-card" @animateContent>
  <h2>Generate Ticket</h2>

  <form class="row" [formGroup]="generateForm">
    <!-- Branch select -->
    <div class="col-md-6">
      <fieldset class="e-form-group ">
        <input
          type="text"
          id="branches"
          class="e-form-control"
          formControlName="branch"
          #branchInput
          (focus)="openListSelect(branchInput, braList)"
          readonly
        />
        <ng-template appSpinnerPlaceholder></ng-template>
        <ul class="e-form-select" #braList>
          <li class="e-form-select__item" *ngFor="let branch of branches">
            <label class="e-form-select__label" [ngClass]="{'active': branchDetail.branchId == branch.id}"  [for]="branch.nameEN">
              <input
                class="e-form-radio"
                type="radio"
                name="branch"
                [value]="branch.id"
                [id]="branch.nameEN"
                (change)="onBranchSelect($event); closeBranchList(braList)"
              />
              {{
                _translationService.isEnglish ? branch.nameEN : branch.nameAR
              }}
            </label>
          </li>
        </ul>
        <label for="branches" class="e-form-label e-form-label--overInput">
          Select Branch
          <!-- <small>(required)</small> -->
        </label>
      </fieldset>
    </div>

    <!-- departments select -->
    <div class="col-md-6">
      <fieldset class="e-form-group ">
        <input
          type="text"
          class="e-form-control"
          id="departments"
          formControlName="department"
          #depInput
          (focus)="openListSelect(depInput, depList)"
          readonly
        />
        <ul class="e-form-select" #depList>
          <li
            class="e-form-select__item"
            *ngFor="let department of branchDetail['departements']"
          >
            <label class="e-form-select__label" [ngClass]="{'active': selectedDep?.departementId == department?.departementId}" [for]="department.departementNameEN">
              <input
                class="e-form-radio"
                type="radio"
                name="department"
                [value]="department.departementId"
                [id]="department.departementNameEN"
                (change)="
                  onDepSelect($event.target.value); closeBranchList(depList)
                "
              />
              {{
                _translationService.isEnglish
                  ? department.departementNameEN
                  : department.departementNameAR
              }}
            </label>
          </li>
        </ul>
        <label for="departments" class="e-form-label e-form-label--overInput">
          Select Department
          <!-- <small>(required)</small> -->
        </label>
      </fieldset>
    </div>
  </form>

  <button class="e-main-btn e-main-btn--withIcon" (click)="generateTicket()">
    <ng-template appSpinnerPlaceholder></ng-template>
    <span class="bel-door icon-ticket-add">
      <span class="path1"></span>
      <span class="path2"></span>
      <span class="path3"></span>
      <span class="path4"></span>
      <span class="path5"></span>
      <span class="path6"></span>
    </span>
    Generate
  </button>
</section>
